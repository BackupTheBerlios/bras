puts "msg: Chaining of pattern rules with no intermediate file"

puts "expect: rm -f Axxxx Bxxxx Cxxxx"
puts "expect: touch Cxxxx"
puts "expect: cp Cxxxx Bxxxx"
puts "expect: cp Bxxxx Axxxx"
puts "expect: rm -f Axxxx Bxxxx Cxxxx"
puts "expect: done"

## clean up left over files
exec rm -f Axxxx Bxxxx Cxxxx

## Pattern rules are set up to create the following build-chain:
## A* --> B* --> C*

proc GenDepC {target} {
  return C[string range $target 1 end]
}
PatternNewer B.* C {
  cp $trigger $target
}


proc GenDepB {target} {
  return B[string range $target 1 end]
}
PatternNewer A.* B {
  cp $trigger $target
}




## Now request to make a file starting with A
Always all Axxxx {
  rm -f Axxxx Bxxxx Cxxxx
  puts done
}

## Terminate the chaining with an existing rule
Exist Cxxxx {
  touch $target
}
