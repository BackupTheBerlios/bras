puts "msg: DependsFile needs to remake xxx.D"

puts "expect: touch bla.h pup.h"
puts "expect: touch xxx.o"
puts "expect: touch bla.h"
puts "expect: touch xxx.D"
puts "expect: touch xxx.o"
puts "expect: rm -f xxx.D xxx.o xxx.c pup.h bla.h"

## We create a situation were xxx.D contains the right things, but
## is older than one of the files mentioned in it


## create dummy includes
exec touch bla.h pup.h

## Create a .c-file for testing
set out [open xxx.c w]
puts $out "\#include \"bla.h\""
puts $out "\#include \"pup.h\""
close $out

## fake the .D-file
set f [open xxx.D w]
puts -nonewline $f "bla.h pup.h"
close $f

## fake the .o-file
exec touch xxx.o

## now make one of the .h-files newer
after 1000
exec touch bla.h

Always all {xxx.o} {
  rm -f xxx.D xxx.o xxx.c pup.h bla.h
}

Newer xxx.o xxx.D {
  touch $target
}

DependsFile xxx.D xxx.c {
  touch $target
}
