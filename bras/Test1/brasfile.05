puts "msg: Rule generation from pattern rule"

puts "expect: touch aaYyYaa"
puts "expect: aaXxXaa <- aaYyYaa"
puts "expect: all <- aaXxXaa"
puts "expect: rm aaYyYaa"

## We need a file to trigger the pattern rule
exec touch aaYyYaa

## This is the proc that is called to make a dependency from the
## target.
proc GenDepYyY {target} {
  regsub XxX $target YyY res
  return $res
}

PatternAlways .*XxX.* YyY {
  puts "$target <- $preq"
}

Always all aaXxXaa {
  puts "$target <- $preq"
  exec rm aaYyYaa
}

Exist aaYyYaa {} {
  puts "this cannot happen"
}